<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spelling</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Styles -->
    <link href="./styles/style.css" rel="stylesheet" type="text/css" defer />
    <link
      href="./styles/jsUtility.css"
      rel="stylesheet"
      type="text/css"
      defer
    />
    <script src="./scripts/style.js" type="module"></script>
    <!-- ***Handle Spelling*** {ðŸ”Š} -->
    <link
      href="./styles/handleSpelling.css"
      rel="stylesheet"
      type="text/css"
      defer
    />
    <!-- ***Handle Word List*** {ðŸ“ƒ} -->
    <link
      href="./styles/handleWordList.css"
      rel="stylesheet"
      type="text/css"
      defer
    />
    <!-- Scripts -->
    <!-- ***Handle Spelling*** {ðŸ”Š} -->
    <script type="module" src="./scripts/handleSpelling/main.js"></script>
    <!-- ***Handle Word List*** {ðŸ“ƒ} -->
    <script src="./scripts/handleWordList/remove.js" type="module"></script>
    <script src="./scripts/handleWordList/main.js" type="module"></script>
    <script src="./scripts/handleWordList/search.js" type="module"></script>
  </head>
  <body>
    <script>
      const pendingRemove = ({ target }) => {
        let pendingRemove = JSON.parse(sessionStorage.getItem("pendingRemove"));

        const word = document.getElementById(target.id);
        word.classList.toggle("remove");

        if (word.classList.contains("remove")) {
          pendingRemove.push(target.id);
          sessionStorage.setItem(
            "pendingRemove",
            JSON.stringify(pendingRemove)
          );
        } else {
          const restoreWord = pendingRemove.indexOf(target.id);
          pendingRemove.splice(restoreWord, 1);
          sessionStorage.setItem(
            "pendingRemove",
            JSON.stringify(pendingRemove)
          );
        }
        if (!pendingRemove.length) {
          if ($("#removeWord").prop("disabled") === false) {
            $("#staticBtn").animate(
              { right: "47%", marginRight: "" },
              300,
              function () {
                $("#staticBtn").css({ right: "", marginRight: "" });
                $("#listToggle").css({ justifyContent: "center" });
              }
            );
            return $("#removeWord").prop("disabled", true);
          }
        }
        if ($("#removeWord").prop("disabled") === true) {
          $("#staticBtn").animate(
            { left: "50%", marginRight: "69px" },
            300,
            function () {
              $("#staticBtn").css({ left: "", marginRight: "15px" });
              $("#listToggle").css({ justifyContent: "flex-end" });
              $("#removeWord").prop("disabled", false);
            }
          );
          return $("#removeWord").prop("disabled", false);
        }
      };
    </script>
    <!-- ***Render*** {ðŸŽ¨} -->
    <!-- <p id="text"></p> -->
    <div id="overlay"></div>
    <!-- ***Interface*** {ðŸ§ˆ} -->
    <!-- Bug, words bigger than 17 letters will have a visual glitch-->
    <main id="handleSpelling">
      <div id="wordIndicator">
        <img
          src="./images/speaker.png"
          id="play-word"
          ondragstart="return false"
        />
        <div id="textWave">
          <!-- Over flow causes reveal word to not show, to fix this, make width 100% so the speaker goes all the wya back and the word can be revealed -->
          <p id="text"></p>
          <span id="bracket">)</span>
        </div>
      </div>

      <!-- ***Input*** {âŒ¨}-->
      <div class="inputContainer" id="spellContainer">
        <img
          src="./images/check.png"
          class="imgBtn"
          id="checkBtn"
          ondragstart="return false"
        />
        <input
          class="input"
          autocomplete="off"
          spellcheck="false"
          id="inputSpelling"
          ondrop="return false"
          type="text"
          placeholder="Spelling..."
          oninput="this.value = this.value.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g, '')"
          onkeydown="this.value = this.value.replace(/[^A-Za-z]/, '')"
        />
        <span id="inputValue"></span>
        <img
          src="./images/reveal.png"
          class="imgBtn"
          id="revealWord"
          ondragstart="return false"
        />
      </div>
    </main>

    <br /><br />
    <!-- ***Input Render*** {âŒ¨ ~ðŸŽ¨}-->
    <!-- Do a shaking animation with it is wrong -->
    <br /><br />
    <!-- ***Word List*** {ðŸ“‹}-->
    <div id="searchContainer">
      <img
        src="./images/search.png"
        ondragstart="return false"
        id="searchImg"
      />
      <div class="inputContainer" id="searchInputContainer">
        <img
          src="./images/save.png"
          class="imgBtn"
          id="saveBtn"
          ondragstart="return false"
        />
        <input
          class="input"
          id="inputWord"
          spellcheck="true"
          type="text"
          maxlength="16"
          placeholder="Add Words..."
          oninput="this.value = this.value = this.value.replace(/[^A-Za-z]/, '')"
        />
      </div>
    </div>

    <footer id="storageList">
      <div id="footerContent">
        <div id="storageInterface">
          <div id="listToggle">
            <button id="staticBtn"></button>
          </div>
          <button id="removeWord">Remove</button>
          <!-- Remove -->
        </div>

        <div id="wordStorage">
          <div id="wordList"></div>
        </div>
      </div>
    </footer>
  </body>
</html>
